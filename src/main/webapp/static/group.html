<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>小组</title>
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/MyCss.css" rel="stylesheet">
    <link href="../css/font-awesome.min.css" rel="stylesheet">
    <link href="../css/star-rating.css" rel="stylesheet">
    <link href="../css/ghost_css.css" rel="stylesheet">

    <script src="../js/jquery-3.3.1.js"></script>
    <script src="../js/jquery.cookie.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/star-rating.min.js"></script>
    <script src="../js/loadWeb.js"></script>
    <script src="../js/group.js"></script>
    <style>
        .img-display {
            max-width: 100%;
            max-height: 100%;
        }
    </style>
</head>
<body>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">模态框（Modal）标题</h4>
            </div>
            <div class="modal-body">在这里添加一些文本</div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>

<nav style="font-size:20px;text-align: center; top: 0;" id="global_header"></nav>
<script>
    $("#global_header").load("../static/global_header.html")
</script>
<div class="aw-container-wrap">
    <div class="container">
        <div class="row" style="zoom: 110%">
            <div class="aw-content-wrap clearfix">
                <div class="col-sm-12 col-md-9 aw-main-content">
                    <div class="aw-mod aw-topic-detail-title">
                        <div class="mod-body">
                            <h2 class="pull-left" id="group_show_name"></h2>

                            <div class="aw-topic-operate text-color-999">
                            </div>
                        </div>

                    </div>
                    <button class="btn btn-primary" id="add-group-focus" style="margin-left: 30px" onclick="add_group_focus()">+加入</button>
                    <div class="aw-mod aw-topic-list-mod">
                        <div class="mod-head">
                            <div class="tabbable">
                                <!-- tab 切换 -->
                                <ul class="nav nav-tabs aw-nav-tabs hidden-xs">
                                    <li class="active"><a href="#all" data-toggle="tab">公告</a></li>
                                    <li><a href="#best_answers" data-toggle="tab">小组介绍</a></li>
                                    <li><a href="#about" id="i_about" data-toggle="tab">小组成员</a></li>
                                </ul>
                                <!-- end tab 切换 -->
                            </div>
                        </div>

                        <div class="mod-body">
                            <!-- tab 切换内容 -->
                            <div class="tab-content">
                                <div class="tab-pane active" id="all">
                                            <div class="aw-common-list" id="c_all_list">
                                                <div class="aw-item ">
                                                    <div class="aw-question-content">
                                                        <h4>
                                                            <a href="javascript:void(0)" onclick="showContent()">该小组解散了</a>
                                                        </h4>
                                                        <p>
                                                            <a
                                                               class="aw-user-name" ></a>
                                                            <span class="text-color-999">发布了该公告 • 2017-06-10 08:48	</span>
                                                        </p>
                                                    </div>

                                                </div>
                                            </div>
                                </div>
                                <div class="tab-pane" id="about">
                                    <div class="aw-topic-detail-about text-color-666 markitup-box">
                                    </div>
                                </div>
                            </div>
                            <!-- end tab 切换内容 -->
                        </div>
                    </div>
                </div>

                <!-- 侧边栏 -->
                <div class="col-sm-12 col-md-3 aw-side-bar hidden-xs">
                    <!-- 话题描述 -->
                    <div class="aw-mod aw-text-align-justify">
                        <div class="mod-head">
                            <h3>object描述</h3>
                            <p id="group_show_object_details"></p>
                        </div>
                        <div class="mod-body">
                        </div>
                    </div>
                    <!-- end 话题描述 -->
                    <!-- 最佳回复者 -->
                    <div class="aw-mod">
                        <div class="mod-head">
                            <h3>小组创建者与管理员</h3>
                        </div>

                        <div class="mod-body">
                            <dl>
                                <dt class="pull-left aw-border-radius-5">
                                    <img id ="manager_head" src="/" alt=""/>
                                </dt>

                                <dd class="pull-left">
                                    <a class="aw-user-name" href="#"
                                       id="manager_name"></a>
                                </dd>
                            </dl>
                        </div>
                    </div>
                    <!-- end 最佳回复者 -->

                    <!-- xx人关注该话题 -->
                    <div class="aw-mod topic-status">
                        <div class="mod-head">
                            <h3 id="user_num"></h3>
                        </div>
                        <div class="mod-body">
                            <div id="focus_users" class="aw-border-radius-5"></div>
                        </div>
                    </div>
                    <!-- end xx人关注该话题 -->

                    <!-- 话题修改记录 -->
                    <!-- end 话题修改记录 -->

                </div>
                <!-- end 侧边栏 -->
            </div>
        </div>
    </div>
</div>

</body>
<script>
    function if_in_group() {
        if(sessionStorage.getItem("u_id")==null){
            return;
        }
        var data={
            "u_id":sessionStorage.getItem("u_id"),
            "gro_id":get_query_object(window.location.href)["gro_id"]
        }
        $.ajax({
            type: 'POST',
            url: '/group/if_in_group',
            data: JSON.stringify(data),
            contentType: 'application/json; charset=UTF-8',
            success: function (data_return) {
                var datares = eval(data_return);
                if(datares['code']===200){
                    $('#add-group-focus').attr('onclick', 'remove_group_focus()').text('退出小组').attr("class", "btn btn-warning");
                }
            }
        });
    }
    function search_group_info(group_info){
        var gro_id = group_info["gro_id"];
        var data = {
            "gro_id":gro_id
        };
        $.ajax({
            type: 'POST',
            url: '/group/get_group_info',
            data: JSON.stringify(data),
            contentType: 'application/json; charset=UTF-8',
            success: function (data_return) {
                var return_info = eval(data_return);
                console.log(return_info);
                $("#group_show_name").append(return_info["gro_name"]+"("+return_info["obj_name"]+"-"+return_info["uni_name"]+")");
                $("#group_show_object_details").append(return_info["obj_details"]);
                $("#manager_head").attr("src",return_info["u_photo"]);
                $("#manager_name").append(return_info["u_nickname"]);
                $("#user_num").append(return_info["gro_user_num"]+" 参与了该项目");
            }
        });
    }
    $(document).ready(function () {
        var group_info = get_query_object(window.location.href);
        search_group_info(group_info);
        if_in_group();
    })
</script>
<script>
    function showContent() {
        console.log(123445);
        $('#myModal').modal('show')
    }
</script>
</html>