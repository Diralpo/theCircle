<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>主页</title>
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/MyCss.css" rel="stylesheet">

    <script src="../js/jquery-3.3.1.js"></script>
    <script src="../js/jquery.cookie.js"></script>
    <script src="../js/bootstrap.min.js"></script>
</head>
<body>
<nav style="font-size:20px;text-align: center; top: 0;" id="global_header"></nav>
<script>
    $("#global_header").load("../static/global_header.html")
</script>

<div class="container">
    <div class="row">
        <div class="col-md-9">
            <input type="text" maxlength="40" class="form-control normal-font" placeholder="search for..."
                   aria-describedby="_Search"
                   id="search_str" style="height: 38px">
        </div>
        <div class="col-md-3">
            <button type="button" class="btn btn-success normal-font"
                    style="background-color: #FFF0F0; border: 0; color: black; height: 38px;">search
            </button>
        </div>
    </div>
    <!-- 显示需要展示的信息 -->
    <br/>

    <div class="row">
        <div class="col-md-2">
            <div>
                <div>
                    <div>
                        按类型浏览
                    </div>
                    <a href="/">
                        游戏
                    </a>
                    <br/>
                    <a href="/">
                        影音
                    </a>
                    <br/>
                    <a href="/">
                        体育
                    </a>
                </div>
                <div>
                    <div>
                        最近查看
                    </div>
                    <div>
                        <a href="/">
                            RimWorld
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-7" id="show-object">
        </div>
        <div class="col-md-3" id="object-details">

        </div>
    </div>

</div>
</body>
<script>
    function myFocus() {
        $("#show-object>div").mouseover(
            $(this).css('background-color', 'rgba(140, 20, 152, 0.1)')
        ).mouseout(
            $(this).css('background-color', 'rgba(140, 251, 152, 0.1)')
        );
    }

    $(document).ready(function () {
        // 文档加载完毕，从数据库中读取需要的信息
        $.ajax({
                type: 'GET',
                url: '/object/seekObject',
                contentType: 'application/json; charset=UTF-8',
                success: function (data_return) { //成功的话，得到消息
                    var data = eval(data_return);
                    var len = data.length;
                    if (len > 0) {
                        for (var i = 0; i < len; i++) {
                            var newP = $(
                                '            <div class="row">\n' +
                                '<p style="display: none" class="object-id">' + data[i]['obj_id'] + '</p>' +
                                '                <a href="' + data[i]['obj_href'] + '">\n' +
                                '                    <div class="col-md-4">\n' +
                                '                        <img alt="' + data[i]['obj_name'] + '" class="object-img"\n' +
                                '                             src="' + data[i]['obj_img_href'] + '">\n' +
                                '                    </div>\n' +
                                '                    <div class="col-md-8">\n' +
                                '                        <p class="object-name">' + data[i]['obj_name'] + '</p>\n' +
                                '                        <div class="object-tags">\n' +
                                '                            <span>建筑建造, 生存, 策略, 沙盒</span>\n' +
                                '                        </div>\n' +
                                '                    </div>\n' +
                                '                </a>\n' +
                                '            </div><br/>');
                            $("#show-object").append(newP)
                        }
                        $("#show-object>div.row").mouseover(function () {
                            $(this).css('background-color', 'rgba(140, 0, 152, 0.1)');
                            var object_id = $(this).find('p.object-id').text();
                            var obj_name = $(this).find('p.object-name').text();
                            var obj_data = {"obj_id": object_id,'obj_name': obj_name};
                            $.ajax({
                                type: 'POST',
                                url: '/object/query',
                                data: JSON.stringify( obj_data ),
                                contentType: 'application/json; charset=UTF-8',
                                success: function (data_return) { //成功的话，得到消息
                                    var detail = eval(data_return);
                                    $("#object-details").html(detail["detail"]).css("background-color",
                                        "rgba(140, 0, 152, 0.1)").height("250px");
                                }
                            }) }
                        ).mouseout(function () {
                            $(this).css('background-color', '')
                        });
                    }
                }
            }
        );
    });
</script>
</html>